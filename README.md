### restmap
![ts](https://badgen.net/badge/-/TypeScript?icon=typescript&label&labelColor=blue&color=555555) ![NPM](https://img.shields.io/npm/l/error-key)     [![Buy us a tree](https://img.shields.io/badge/Treeware-%F0%9F%8C%B3-lightgreen)](https://plant.treeware.earth/dawnimpulse/error-key) [![Conventional Commits](https://img.shields.io/badge/Conventional%20Commits-1.0.0-blue.svg)](https://conventionalcommits.org)

### Goal
To create a simple way to query only the required data from a **Rest API** without relying on lot of external tools or code.

> This project is inspired from GraphQl

But unlike graphql which is itself a whole new query language, **restmap** aims to create a much simpler approach where you just write a simple string which is used to parse and minify the said data.

### Why replace GraphQl ?

In no way restmap is replacement for GraphQl which is a very extensive qeury language that do a lot of things.

**Restmap solely aims to limit your data without any additional tools/library on fronend/backend. All you need is just few lines of code on server side.**

* Graphql requires you to configure/change a lot of your frontend & backend.
* For Graphql in frontend specially you need a new way to consume data by configuring a new library other than existing HTTP / REST api which put additional strain on frontend devs.

### Example
Suppose we have something like this
```
{
	"rest" : {
		"query: {
			"lang" : "",
			"map" : "",
			"name" : "",
			"age" : 2
		}
	}
}
```
Now if I just want 2 keys inside query, we can write a special restmap

> **`{rest{query{lang,map}}}`**

which will return only the required data just like graphql
```
{
	"rest" : {
		"query: {
			"lang" : "",
			"map" : ""
		}
	}
}
```

### Diving Deep
#### Generating the map
> `generateMap()`

|params|description|
|--|--|
| data | json object/array to be converted |

**@return** `string`  : the restmap string
**@description** :  The map is generated by providing the required json object in the `generateMap()` function. Basically the map is a simple json removing all double quotes and end values + replacing array with object notation i.e. you can treat it something really similar to **graphql queries** without extra spaces or anything.

#### Verifying the map
> `verifyMap()`

|params|description|
|--|--|
| restmap | the restmap string you need to validate |

**@return** `boolean`
**@description** : You can verify either the map is valid or not

#### Parsing/Reducing the data
> `reduceData()`

|params|description|
|--|--|
|restmap| restmap string to reduce the data|
|data|the actual data to be reduced|
|unavailable| *(optional)* if a key is provided in restmap but doesn't exist in actual data then this will be the value of that key; **default is `{}`**|

**@returns** `object` : reduced/parsed data
**@description** : To parse the data according to our requirement we can pass out map & original data directly to `reduceData(map,data)` function which will return the expected output

### How to use
> The goal is to make it as simple as possible for both frontend (mainly) and backend devs
- One of the way is to ask the client/frontend to send the map via header `restmap` param (again completely upto you which way you want the map)
- Create a middleware function in your express, koa, hapi etc and wait for the normal response after which you can simply check for `restmap` param if it exists, verify the map (if u want) & then send the `reduceData` output
- You can also use it inside a single route, again completely upto you

### Future
The project is currently in beta stage but the results are very promising and the library can be used in production environment. It would be great that collaboratively we all will test more for edge cases.

### What needs to be improved/added
> It would be amazing to have community support for testing & working out more features

* Creating middleware for express/koa/hapi etc
* Porting the library in other languages eg. python
* Improving algorithm for all tasks like generating map, parsing map & reducing data

### Contact
I am always available for QAs. You can reach via following -

+ Twitter - [@dawnimpulse](https://twitter.com/dawnimpulse)
+ Email - [dawnimpulse@gmail.com](mailto:dawnimpulse@gmail.com)

### License
I used a very open license which grants you to use this libary in personal/commerical use without any fees/declartion etc **but you can't reproduce & sell it as your own**

```
ISC License  
  
Copyright 2021, Saksham (DawnImpulse)  
  
Permission to use, copy, modify, and/or distribute this software for any purpose with or without fee is hereby granted,  
provided that the above copyright notice and this permission notice appear in all copies.  
  
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL  
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,  
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,  
WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE  
OR PERFORMANCE OF THIS SOFTWARE.
```
> Written with [StackEdit](https://stackedit.io/).